{"version":3,"file":"mat-right-sheet.mjs","sources":["../../../projects/right-sheet/src/lib/right-sheet.animations.ts","../../../projects/right-sheet/src/lib/right-sheet.config.ts","../../../projects/right-sheet/src/lib/right-sheet.container.ts","../../../projects/right-sheet/src/lib/right-sheet.container.html","../../../projects/right-sheet/src/lib/right-sheet.module.ts","../../../projects/right-sheet/src/lib/right-sheet.ref.ts","../../../projects/right-sheet/src/lib/right-sheet.ts","../../../projects/right-sheet/src/public-api.ts","../../../projects/right-sheet/src/mat-right-sheet.ts"],"sourcesContent":["/**\r\n * @license\r\n * Copyright Google LLC All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an MIT-style license that can be\r\n * found in the LICENSE file at https://angular.io/license\r\n */\r\nimport { animate, AnimationTriggerMetadata, state, style, transition, trigger, } from '@angular/animations';\r\nimport { AnimationCurves, AnimationDurations } from '@angular/material/core';\r\n\r\n/** Animations used by the Material bottom sheet. */\r\nexport const matRightSheetAnimations: {\r\n  readonly rightSheetState: AnimationTriggerMetadata;\r\n} = {\r\n  /** Animation that shows and hides a bottom sheet. */\r\n  rightSheetState: trigger('state', [\r\n    state('void, hidden', style({transform: 'translateX(100%)'})),\r\n    state('visible', style({transform: 'translateX(0%)'})),\r\n    transition(\r\n      'visible => void, visible => hidden',\r\n      animate(\r\n        `${AnimationDurations.COMPLEX} ${\r\n          AnimationCurves.ACCELERATION_CURVE\r\n        }`,\r\n      ),\r\n    ),\r\n    transition(\r\n      'void => visible',\r\n      animate(\r\n        `${AnimationDurations.EXITING} ${\r\n          AnimationCurves.DECELERATION_CURVE\r\n        }`,\r\n      ),\r\n    ),\r\n  ]),\r\n};\r\n","/**\r\n * @license\r\n * Copyright Google LLC All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an MIT-style license that can be\r\n * found in the LICENSE file at https://angular.io/license\r\n */\r\n\r\nimport { Direction } from '@angular/cdk/bidi';\r\nimport { ScrollStrategy } from '@angular/cdk/overlay';\r\nimport { InjectionToken, ViewContainerRef } from '@angular/core';\r\n\r\n/** Options for where to set focus to automatically on dialog open */\r\nexport type AutoFocusTarget = 'dialog' | 'first-tabbable' | 'first-heading';\r\n\r\n/** Injection token that can be used to access the data that was passed in to a bottom sheet. */\r\nexport const MAT_RIGHT_SHEET_DATA = new InjectionToken<any>('MatRightSheetData');\r\n\r\n/**\r\n * Configuration used when opening a right sheet.\r\n */\r\nexport class MatRightSheetConfig<D = any> {\r\n  /** The view container to place the overlay for the bottom sheet into. */\r\n  public viewContainerRef?: ViewContainerRef;\r\n\r\n  /** Extra CSS classes to be added to the bottom sheet container. */\r\n  public panelClass?: string | Array<string>;\r\n\r\n  /** Text layout direction for the bottom sheet. */\r\n  public direction?: Direction;\r\n\r\n  /** Data being injected into the child component. */\r\n  public data?: D | null = null;\r\n\r\n  /** Whether the bottom sheet has a backdrop. */\r\n  public hasBackdrop?: boolean = true;\r\n\r\n  /** Custom class for the backdrop. */\r\n  public backdropClass?: string;\r\n\r\n  /** Whether the user can use escape or clicking outside to close the bottom sheet. */\r\n  public disableClose?: boolean = false;\r\n\r\n  /** Aria label to assign to the bottom sheet element. */\r\n  public ariaLabel?: string | null = null;\r\n\r\n  /**\r\n   * Whether the bottom sheet should close when the user goes backwards/forwards in history.\r\n   * Note that this usually doesn't include clicking on links (unless the user is using\r\n   * the `HashLocationStrategy`).\r\n   */\r\n  public closeOnNavigation?: boolean = true;\r\n\r\n  // Note that this is set to 'dialog' by default, because while the a11y recommendations\r\n  // are to focus the first focusable element, doing so prevents screen readers from reading out the\r\n  // rest of the bottom sheet content.\r\n  /**\r\n   * Where the bottom sheet should focus on open.\r\n   * @breaking-change 14.0.0 Remove boolean option from autoFocus. Use string or\r\n   * AutoFocusTarget instead.\r\n   */\r\n   autoFocus?: AutoFocusTarget | string | boolean = 'dialog';\r\n\r\n  /**\r\n   * Whether the bottom sheet should restore focus to the\r\n   * previously-focused element, after it's closed.\r\n   */\r\n  public restoreFocus?: boolean = true;\r\n\r\n  /** Scroll strategy to be used for the bottom sheet. */\r\n  scrollStrategy?: ScrollStrategy;\r\n\r\n  /**\r\n   * width of overlay\r\n   */\r\n  public width?: string;\r\n}\r\n","/**\r\n * @license\r\n * Copyright Google LLC All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an MIT-style license that can be\r\n * found in the LICENSE file at https://angular.io/license\r\n */\r\n\r\nimport { AnimationEvent } from '@angular/animations';\r\nimport { FocusTrap, FocusTrapFactory, InteractivityChecker } from '@angular/cdk/a11y';\r\nimport { coerceArray } from '@angular/cdk/coercion';\r\nimport { BreakpointObserver, Breakpoints } from '@angular/cdk/layout';\r\nimport { _getFocusedElementPierceShadowDom } from '@angular/cdk/platform';\r\nimport { BasePortalOutlet, CdkPortalOutlet, ComponentPortal, TemplatePortal, } from '@angular/cdk/portal';\r\nimport { DOCUMENT } from '@angular/common';\r\nimport {\r\n  ChangeDetectionStrategy,\r\n  ChangeDetectorRef,\r\n  Component,\r\n  ComponentRef,\r\n  ElementRef,\r\n  EmbeddedViewRef,\r\n  EventEmitter,\r\n  Inject,\r\n  NgZone,\r\n  OnDestroy,\r\n  Optional,\r\n  ViewChild,\r\n  ViewEncapsulation,\r\n} from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\nimport { matRightSheetAnimations } from './right-sheet.animations';\r\nimport { MatRightSheetConfig } from './right-sheet.config';\r\n\r\n// TODO(crisbeto): consolidate some logic between this, MatDialog and MatSnackBar\r\n\r\n/**\r\n * Internal component that wraps user-provided bottom sheet content.\r\n * @docs-private\r\n */\r\n@Component({\r\n  //    moduleId: module.id,\r\n  selector: 'mat-right-sheet-container',\r\n  templateUrl: './right-sheet.container.html',\r\n  styleUrls: ['./right-sheet.container.scss'],\r\n  // In Ivy embedded views will be change detected from their declaration place, rather than where\r\n  // they were stamped out. This means that we can't have the bottom sheet container be OnPush,\r\n  // because it might cause the sheets that were opened from a template not to be out of date.\r\n  // tslint:disable-next-line:validate-decorators\r\n  changeDetection: ChangeDetectionStrategy.Default,\r\n  // tslint:disable-next-line: use-view-encapsulation\r\n  encapsulation: ViewEncapsulation.None,\r\n  animations: [matRightSheetAnimations.rightSheetState],\r\n  // tslint:disable-next-line: use-host-property-decorator\r\n  host: {\r\n    class: 'mat-right-sheet-container',\r\n    tabindex: '-1',\r\n    role: 'dialog',\r\n    'aria-modal': 'true',\r\n    '[attr.aria-label]': 'rightSheetConfig?.ariaLabel',\r\n    '[@state]': '_animationState',\r\n    '(@state.start)': '_onAnimationStart($event)',\r\n    '(@state.done)': '_onAnimationDone($event)',\r\n  },\r\n})\r\n// tslint:disable-next-line: component-class-suffix\r\nexport class MatRightSheetContainer extends BasePortalOutlet\r\n  implements OnDestroy {\r\n  /** Emits whenever the state of the animation changes. */\r\n  public _animationStateChanged = new EventEmitter<AnimationEvent>();\r\n\r\n  /** The state of the bottom sheet animations. */\r\n  public _animationState: 'void' | 'visible' | 'hidden' = 'void';\r\n  private readonly _breakpointSubscription: Subscription;\r\n\r\n  /** The portal outlet inside of this container into which the content will be loaded. */\r\n  @ViewChild(CdkPortalOutlet, {static: true})\r\n  private readonly _portalOutlet: CdkPortalOutlet;\r\n\r\n  /** The class that traps and manages focus within the bottom sheet. */\r\n  private _focusTrap: FocusTrap;\r\n\r\n  /** Element that was focused before the bottom sheet was opened. */\r\n  private _elementFocusedBeforeOpened: HTMLElement | null = null;\r\n\r\n  /** Server-side rendering-compatible reference to the global document object. */\r\n  private readonly _document: Document;\r\n\r\n  /** Whether the component has been destroyed. */\r\n  private _destroyed: boolean;\r\n\r\n  constructor(\r\n    private readonly _elementRef: ElementRef<HTMLElement>,\r\n    private readonly _changeDetectorRef: ChangeDetectorRef,\r\n    private readonly _focusTrapFactory: FocusTrapFactory,\r\n    private readonly _interactivityChecker: InteractivityChecker,\r\n    private readonly _ngZone: NgZone,\r\n    breakpointObserver: BreakpointObserver,\r\n    @Optional() @Inject(DOCUMENT) document: any,\r\n    /**\r\n     * The right sheet configuration.\r\n     */\r\n    public rightSheetConfig: MatRightSheetConfig,\r\n  ) {\r\n    super();\r\n\r\n    this._document = document as Document;\r\n    this._breakpointSubscription = breakpointObserver\r\n      .observe([\r\n        Breakpoints.Medium,\r\n        Breakpoints.Large,\r\n        Breakpoints.XLarge,\r\n      ])\r\n      .subscribe(() => {\r\n        this._toggleClass(\r\n          'mat-right-sheet-container-medium',\r\n          breakpointObserver.isMatched(Breakpoints.Medium),\r\n        );\r\n        this._toggleClass(\r\n          'mat-right-sheet-container-large',\r\n          breakpointObserver.isMatched(Breakpoints.Large),\r\n        );\r\n        this._toggleClass(\r\n          'mat-right-sheet-container-xlarge',\r\n          breakpointObserver.isMatched(Breakpoints.XLarge),\r\n        );\r\n      });\r\n  }\r\n\r\n  /** Attach a component portal as content to this bottom sheet container. */\r\n  public attachComponentPortal<T>(\r\n    portal: ComponentPortal<T>,\r\n  ): ComponentRef<T> {\r\n    this._validatePortalAttached();\r\n    this._setPanelClass();\r\n    this._savePreviouslyFocusedElement();\r\n    return this._portalOutlet.attachComponentPortal(portal);\r\n  }\r\n\r\n  /** Attach a template portal as content to this bottom sheet container. */\r\n  public attachTemplatePortal<C>(\r\n    portal: TemplatePortal<C>,\r\n  ): EmbeddedViewRef<C> {\r\n    this._validatePortalAttached();\r\n    this._setPanelClass();\r\n    this._savePreviouslyFocusedElement();\r\n    return this._portalOutlet.attachTemplatePortal(portal);\r\n  }\r\n\r\n  /** Begin animation of bottom sheet entrance into view. */\r\n  public enter(): void {\r\n    if (!this._destroyed) {\r\n      this._animationState = 'visible';\r\n      this._changeDetectorRef.detectChanges();\r\n    }\r\n  }\r\n\r\n  /** Begin animation of the bottom sheet exiting from view. */\r\n  public exit(): void {\r\n    if (!this._destroyed) {\r\n      this._animationState = 'hidden';\r\n      this._changeDetectorRef.markForCheck();\r\n    }\r\n  }\r\n\r\n  public ngOnDestroy() {\r\n    this._breakpointSubscription.unsubscribe();\r\n    this._destroyed = true;\r\n  }\r\n\r\n  public _onAnimationDone(event: AnimationEvent) {\r\n    if (event.toState === 'hidden') {\r\n      this._restoreFocus();\r\n    } else if (event.toState === 'visible') {\r\n      this._trapFocus();\r\n    }\r\n\r\n    this._animationStateChanged.emit(event);\r\n  }\r\n\r\n  public _onAnimationStart(event: AnimationEvent) {\r\n    this._animationStateChanged.emit(event);\r\n  }\r\n\r\n  private _toggleClass(cssClass: string, add: boolean) {\r\n    this._elementRef.nativeElement.classList.toggle(cssClass, add);\r\n  }\r\n\r\n  private _validatePortalAttached() {\r\n    if (this._portalOutlet.hasAttached()) {\r\n      throw Error(\r\n        'Attempting to attach bottom sheet content after content is already attached',\r\n      );\r\n    }\r\n  }\r\n\r\n  private _setPanelClass() {\r\n    const element: HTMLElement = this._elementRef.nativeElement;\r\n    element.classList.add(...coerceArray(this.rightSheetConfig.panelClass || []));\r\n  }\r\n\r\n/**\r\n   * Focuses the provided element. If the element is not focusable, it will add a tabIndex\r\n   * attribute to forcefully focus it. The attribute is removed after focus is moved.\r\n   * @param element The element to focus.\r\n   */\r\n private _forceFocus(element: HTMLElement, options?: FocusOptions) {\r\n  if (!this._interactivityChecker.isFocusable(element)) {\r\n    element.tabIndex = -1;\r\n    // The tabindex attribute should be removed to avoid navigating to that element again\r\n    this._ngZone.runOutsideAngular(() => {\r\n      element.addEventListener('blur', () => element.removeAttribute('tabindex'));\r\n      element.addEventListener('mousedown', () => element.removeAttribute('tabindex'));\r\n    });\r\n  }\r\n  element.focus(options);\r\n}\r\n\r\n  /**\r\n   * Focuses the first element that matches the given selector within the focus trap.\r\n   * @param selector The CSS selector for the element to set focus to.\r\n   */\r\n   private _focusByCssSelector(selector: string, options?: FocusOptions) {\r\n    let elementToFocus = this._elementRef.nativeElement.querySelector(\r\n      selector,\r\n    ) as HTMLElement | null;\r\n    if (elementToFocus) {\r\n      this._forceFocus(elementToFocus, options);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Moves the focus inside the focus trap. When autoFocus is not set to 'bottom-sheet',\r\n   * if focus cannot be moved then focus will go to the bottom sheet container.\r\n   */\r\n   private _trapFocus() {\r\n    const element = this._elementRef.nativeElement;\r\n\r\n    if (!this._focusTrap) {\r\n      this._focusTrap = this._focusTrapFactory.create(element);\r\n    }\r\n\r\n    // If were to attempt to focus immediately, then the content of the bottom sheet would not\r\n    // yet be ready in instances where change detection has to run first. To deal with this,\r\n    // we simply wait for the microtask queue to be empty when setting focus when autoFocus\r\n    // isn't set to bottom sheet. If the element inside the bottom sheet can't be focused,\r\n    // then the container is focused so the user can't tab into other elements behind it.\r\n    switch (this.rightSheetConfig.autoFocus) {\r\n      case false:\r\n      case 'dialog':\r\n        const activeElement = _getFocusedElementPierceShadowDom();\r\n        // Ensure that focus is on the bottom sheet container. It's possible that a different\r\n        // component tried to move focus while the open animation was running. See:\r\n        // https://github.com/angular/components/issues/16215. Note that we only want to do this\r\n        // if the focus isn't inside the bottom sheet already, because it's possible that the\r\n        // consumer specified `autoFocus` in order to move focus themselves.\r\n        if (activeElement !== element && !element.contains(activeElement)) {\r\n          element.focus();\r\n        }\r\n        break;\r\n      case true:\r\n      case 'first-tabbable':\r\n        this._focusTrap.focusInitialElementWhenReady();\r\n        break;\r\n      case 'first-heading':\r\n        this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role=\"heading\"]');\r\n        break;\r\n      default:\r\n        this._focusByCssSelector(this.rightSheetConfig.autoFocus!);\r\n        break;\r\n    }\r\n  }\r\n\r\n  /** Restores focus to the element that was focused before the bottom sheet was opened. */\r\n  private _restoreFocus() {\r\n    const toFocus = this._elementFocusedBeforeOpened;\r\n\r\n    // We need the extra check, because IE can set the `activeElement` to null in some cases.\r\n    if (\r\n      this.rightSheetConfig.restoreFocus &&\r\n      toFocus &&\r\n      typeof toFocus.focus === 'function'\r\n    ) {\r\n      const activeElement = this._document.activeElement;\r\n      const element = this._elementRef.nativeElement;\r\n\r\n      // Make sure that focus is still inside the bottom sheet or is on the body (usually because a\r\n      // non-focusable element like the backdrop was clicked) before moving it. It's possible that\r\n      // the consumer moved it themselves before the animation was done, in which case we shouldn't\r\n      // do anything.\r\n      if (!activeElement || activeElement === this._document.body || activeElement === element ||\r\n        element.contains(activeElement)) {\r\n        toFocus.focus();\r\n      }\r\n    }\r\n\r\n    if (this._focusTrap) {\r\n      this._focusTrap.destroy();\r\n    }\r\n  }\r\n\r\n  /** Saves a reference to the element that was focused before the bottom sheet was opened. */\r\n  private _savePreviouslyFocusedElement() {\r\n    this._elementFocusedBeforeOpened = this._document\r\n      .activeElement as HTMLElement;\r\n\r\n    // The `focus` method isn't available during server-side rendering.\r\n    if (this._elementRef.nativeElement.focus) {\r\n      this._ngZone.runOutsideAngular(() => {\r\n        Promise.resolve().then(() => this._elementRef.nativeElement.focus());\r\n      });\r\n    }\r\n  }\r\n}\r\n","<ng-template cdkPortalOutlet></ng-template>\r\n","/**\r\n * @license\r\n * Copyright Google LLC All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an MIT-style license that can be\r\n * found in the LICENSE file at https://angular.io/license\r\n */\r\n\r\nimport { OverlayModule } from '@angular/cdk/overlay';\r\nimport { PortalModule } from '@angular/cdk/portal';\r\nimport { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { MatCommonModule } from '@angular/material/core';\r\nimport { MatRightSheetContainer } from './right-sheet.container';\r\n\r\n@NgModule({\r\n    imports: [CommonModule, OverlayModule, MatCommonModule, PortalModule],\r\n    exports: [MatRightSheetContainer, MatCommonModule],\r\n    declarations: [MatRightSheetContainer]\r\n})\r\nexport class MatRightSheetModule {\r\n}\r\n","/**\r\n * @license\r\n * Copyright Google LLC All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an MIT-style license that can be\r\n * found in the LICENSE file at https://angular.io/license\r\n */\r\n\r\nimport { ESCAPE, hasModifierKey } from '@angular/cdk/keycodes';\r\nimport { OverlayRef } from '@angular/cdk/overlay';\r\nimport { Location } from '@angular/common';\r\nimport { merge, Observable, Subject } from 'rxjs';\r\nimport { filter, take } from 'rxjs/operators';\r\nimport { MatRightSheetContainer } from './right-sheet.container';\r\n\r\n/**\r\n * Reference to a bottom sheet dispatched from the bottom sheet service.\r\n */\r\nexport class MatRightSheetRef<T = any, R = any> {\r\n  /** Instance of the component making up the content of the bottom sheet. */\r\n  public instance: T;\r\n\r\n  /**\r\n   * Instance of the component into which the bottom sheet content is projected.\r\n   * @docs-private\r\n   */\r\n  public containerInstance: MatRightSheetContainer;\r\n\r\n  /** Whether the user is allowed to close the bottom sheet. */\r\n  public disableClose: boolean | undefined;\r\n\r\n  /** Subject for notifying the user that the bottom sheet has been dismissed. */\r\n  private readonly _afterDismissed = new Subject<R | undefined>();\r\n\r\n  /** Subject for notifying the user that the bottom sheet has opened and appeared. */\r\n  private readonly _afterOpened = new Subject<void>();\r\n\r\n  /** Result to be passed down to the `afterDismissed` stream. */\r\n  private _result: R | undefined;\r\n\r\n  constructor(\r\n    containerInstance: MatRightSheetContainer,\r\n    private readonly _overlayRef: OverlayRef,\r\n    // @breaking-change 8.0.0 `_location` parameter to be removed.\r\n    _location?: Location,\r\n  ) {\r\n    this.containerInstance = containerInstance;\r\n    this.disableClose = containerInstance.rightSheetConfig.disableClose;\r\n\r\n    // Emit when opening animation completes\r\n    containerInstance._animationStateChanged\r\n      .pipe(\r\n        filter(\r\n          (event) =>\r\n            event.phaseName === 'done' &&\r\n            event.toState === 'visible',\r\n        ),\r\n        take(1),\r\n      )\r\n      .subscribe(() => {\r\n        this._afterOpened.next();\r\n        this._afterOpened.complete();\r\n      });\r\n\r\n    // Dispose overlay when closing animation is complete\r\n    containerInstance._animationStateChanged\r\n      .pipe(\r\n        filter(\r\n          (event) =>\r\n            event.phaseName === 'done' &&\r\n            event.toState === 'hidden',\r\n        ),\r\n        take(1),\r\n      )\r\n      .subscribe(() => {\r\n        this._overlayRef.dispose();\r\n        this._afterDismissed.next(this._result);\r\n        this._afterDismissed.complete();\r\n      });\r\n\r\n    merge(\r\n      _overlayRef.backdropClick(),\r\n      _overlayRef\r\n        .keydownEvents()\r\n        .pipe(filter((event) => event.keyCode === ESCAPE)),\r\n    ).subscribe(() => {\r\n      if (!this.disableClose &&\r\n        (event.type !== 'keydown' || !hasModifierKey(event as KeyboardEvent))) {\r\n        event.preventDefault();\r\n        this.dismiss();\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Dismisses the bottom sheet.\r\n   * @param result Data to be passed back to the bottom sheet opener.\r\n   */\r\n  public dismiss(result?: R): void {\r\n    if (!this._afterDismissed.closed) {\r\n      // Transition the backdrop in parallel to the bottom sheet.\r\n      this.containerInstance._animationStateChanged\r\n        .pipe(\r\n          filter((event) => event.phaseName === 'start'),\r\n          take(1),\r\n        )\r\n        .subscribe(() => this._overlayRef.detachBackdrop());\r\n\r\n      this._result = result;\r\n      this.containerInstance.exit();\r\n    }\r\n  }\r\n\r\n  /** Gets an observable that is notified when the bottom sheet is finished closing. */\r\n  public afterDismissed(): Observable<R | undefined> {\r\n    return this._afterDismissed.asObservable();\r\n  }\r\n\r\n  /** Gets an observable that is notified when the bottom sheet has opened and appeared. */\r\n  public afterOpened(): Observable<void> {\r\n    return this._afterOpened.asObservable();\r\n  }\r\n\r\n  /**\r\n   * Gets an observable that emits when the overlay's backdrop has been clicked.\r\n   */\r\n  public backdropClick(): Observable<MouseEvent> {\r\n    return this._overlayRef.backdropClick();\r\n  }\r\n\r\n  /**\r\n   * Gets an observable that emits when keydown events are targeted on the overlay.\r\n   */\r\n  public keydownEvents(): Observable<KeyboardEvent> {\r\n    return this._overlayRef.keydownEvents();\r\n  }\r\n\r\n  public updateWidth(width: string) {\r\n    this._overlayRef.updateSize({width});\r\n  }\r\n}\r\n","/**\r\n * @license\r\n * Copyright Google LLC All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an MIT-style license that can be\r\n * found in the LICENSE file at https://angular.io/license\r\n */\r\n\r\nimport { Directionality } from '@angular/cdk/bidi';\r\nimport { Overlay, OverlayConfig, OverlayRef } from '@angular/cdk/overlay';\r\nimport { ComponentPortal, ComponentType, PortalInjector, TemplatePortal, } from '@angular/cdk/portal';\r\nimport { Location } from '@angular/common';\r\nimport { ComponentRef, Inject, Injectable, InjectionToken, Injector, OnDestroy, Optional, SkipSelf, TemplateRef, } from '@angular/core';\r\nimport { of as observableOf } from 'rxjs';\r\nimport { MAT_RIGHT_SHEET_DATA, MatRightSheetConfig } from './right-sheet.config';\r\nimport { MatRightSheetContainer } from './right-sheet.container';\r\nimport { MatRightSheetModule } from './right-sheet.module';\r\nimport { MatRightSheetRef } from './right-sheet.ref';\r\n\r\n/** Injection token that can be used to specify default bottom sheet options. */\r\nexport const MAT_RIGHT_SHEET_DEFAULT_OPTIONS = new InjectionToken<MatRightSheetConfig>('mat-right-sheet-default-options');\r\n\r\n/**\r\n * Service to trigger Material Design right sheets.\r\n */\r\n@Injectable({providedIn: MatRightSheetModule})\r\nexport class MatRightSheet implements OnDestroy {\r\n  private _rightSheetRefAtThisLevel: MatRightSheetRef<any> | null = null;\r\n\r\n  /** Reference to the currently opened bottom sheet. */\r\n  get _openedRightSheetRef(): MatRightSheetRef<any> | null {\r\n    const parent = this._parentRightSheet;\r\n    return parent\r\n      ? parent._openedRightSheetRef\r\n      : this._rightSheetRefAtThisLevel;\r\n  }\r\n\r\n  set _openedRightSheetRef(value: MatRightSheetRef<any> | null) {\r\n    if (this._parentRightSheet) {\r\n      this._parentRightSheet._openedRightSheetRef = value;\r\n    } else {\r\n      this._rightSheetRefAtThisLevel = value;\r\n    }\r\n  }\r\n\r\n  constructor(\r\n    private readonly _overlay: Overlay,\r\n    private readonly _injector: Injector,\r\n    @Optional()\r\n    @SkipSelf()\r\n    private readonly _parentRightSheet: MatRightSheet,\r\n    @Optional() private readonly _location?: Location,\r\n    @Optional()\r\n    @Inject(MAT_RIGHT_SHEET_DEFAULT_OPTIONS)\r\n    private readonly _defaultOptions?: MatRightSheetConfig,\r\n  ) {\r\n  }\r\n\r\n  public open<T, D = any, R = any>(\r\n    component: ComponentType<T>,\r\n    config?: MatRightSheetConfig<D>,\r\n  ): MatRightSheetRef<T, R>;\r\n  public open<T, D = any, R = any>(\r\n    template: TemplateRef<T>,\r\n    config?: MatRightSheetConfig<D>,\r\n  ): MatRightSheetRef<T, R>;\r\n  public open<T, D = any, R = any>(\r\n    componentOrTemplateRef: ComponentType<T> | TemplateRef<T>,\r\n    config?: MatRightSheetConfig<D>,\r\n  ): MatRightSheetRef<T, R> {\r\n    const _config = _applyConfigDefaults(\r\n      this._defaultOptions || new MatRightSheetConfig(),\r\n      config,\r\n    );\r\n    const overlayRef = this._createOverlay(_config);\r\n    const container = this._attachContainer(overlayRef, _config);\r\n    const ref = new MatRightSheetRef<T, R>(\r\n      container,\r\n      overlayRef,\r\n      this._location,\r\n    );\r\n\r\n    if (componentOrTemplateRef instanceof TemplateRef) {\r\n      container.attachTemplatePortal(\r\n        new TemplatePortal<T>(componentOrTemplateRef, null!, {\r\n          $implicit: _config.data,\r\n          rightSheetRef: ref,\r\n        } as any),\r\n      );\r\n    } else {\r\n      const portal = new ComponentPortal(\r\n        componentOrTemplateRef,\r\n        undefined,\r\n        this._createInjector(_config, ref),\r\n      );\r\n      const contentRef = container.attachComponentPortal(portal);\r\n      ref.instance = contentRef.instance;\r\n    }\r\n\r\n    // When the bottom sheet is dismissed, clear the reference to it.\r\n    ref.afterDismissed().subscribe(() => {\r\n      // Clear the bottom sheet ref if it hasn't already been replaced by a newer one.\r\n      if (this._openedRightSheetRef == ref) {\r\n        this._openedRightSheetRef = null;\r\n      }\r\n    });\r\n\r\n    if (this._openedRightSheetRef) {\r\n      // If a bottom sheet is already in view, dismiss it and enter the\r\n      // new bottom sheet after exit animation is complete.\r\n      this._openedRightSheetRef\r\n        .afterDismissed()\r\n        .subscribe(() => ref.containerInstance.enter());\r\n      this._openedRightSheetRef.dismiss();\r\n    } else {\r\n      // If no bottom sheet is in view, enter the new bottom sheet.\r\n      ref.containerInstance.enter();\r\n    }\r\n\r\n    this._openedRightSheetRef = ref;\r\n\r\n    return ref;\r\n  }\r\n\r\n  /**\r\n   * Dismisses the currently-visible bottom sheet.\r\n   */\r\n  public dismiss(): void {\r\n    if (this._openedRightSheetRef) {\r\n      this._openedRightSheetRef.dismiss();\r\n    }\r\n  }\r\n\r\n  public ngOnDestroy() {\r\n    if (this._rightSheetRefAtThisLevel) {\r\n      this._rightSheetRefAtThisLevel.dismiss();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Attaches the bottom sheet container component to the overlay.\r\n   */\r\n  private _attachContainer(\r\n    overlayRef: OverlayRef,\r\n    config: MatRightSheetConfig,\r\n  ): MatRightSheetContainer {\r\n    const userInjector =\r\n      config &&\r\n      config.viewContainerRef &&\r\n      config.viewContainerRef.injector;\r\n    const injector = new PortalInjector(\r\n      userInjector || this._injector,\r\n      new WeakMap([[MatRightSheetConfig, config]]),\r\n    );\r\n\r\n    const containerPortal = new ComponentPortal(\r\n      MatRightSheetContainer,\r\n      config.viewContainerRef,\r\n      injector,\r\n    );\r\n    const containerRef: ComponentRef<MatRightSheetContainer> = overlayRef.attach(containerPortal);\r\n    return containerRef.instance;\r\n  }\r\n\r\n  /**\r\n   * Creates a new overlay and places it in the correct location.\r\n   * @param config The user-specified bottom sheet config.\r\n   */\r\n  private _createOverlay(config: MatRightSheetConfig): OverlayRef {\r\n    const overlayConfig = new OverlayConfig({\r\n      direction: config.direction,\r\n      hasBackdrop: config.hasBackdrop,\r\n      disposeOnNavigation: config.closeOnNavigation,\r\n      width: config.width || '420px',\r\n      height: '100vh',\r\n      scrollStrategy: config.scrollStrategy || this._overlay.scrollStrategies.block(),\r\n      positionStrategy: this._overlay\r\n        .position()\r\n        .global()\r\n        .top('0px')\r\n        .right('0px')\r\n        .bottom('0px'),\r\n    });\r\n\r\n    if (config.backdropClass) {\r\n      overlayConfig.backdropClass = config.backdropClass;\r\n    }\r\n\r\n    return this._overlay.create(overlayConfig);\r\n  }\r\n\r\n  /**\r\n   * Creates an injector to be used inside of a bottom sheet component.\r\n   * @param config Config that was used to create the bottom sheet.\r\n   * @param rightSheetRef Reference to the bottom sheet.\r\n   */\r\n  private _createInjector<T>(\r\n    config: MatRightSheetConfig,\r\n    rightSheetRef: MatRightSheetRef<T>,\r\n  ): PortalInjector {\r\n    const userInjector =\r\n      config &&\r\n      config.viewContainerRef &&\r\n      config.viewContainerRef.injector;\r\n    const injectionTokens = new WeakMap<any, any>([\r\n      [MatRightSheetRef, rightSheetRef],\r\n      [MAT_RIGHT_SHEET_DATA, config.data],\r\n    ]);\r\n\r\n    if (\r\n      config.direction &&\r\n      (!userInjector ||\r\n        !userInjector.get<Directionality | null>(Directionality, null))\r\n    ) {\r\n      injectionTokens.set(Directionality, {\r\n        value: config.direction,\r\n        change: observableOf(),\r\n      });\r\n    }\r\n\r\n    return new PortalInjector(\r\n      userInjector || this._injector,\r\n      injectionTokens,\r\n    );\r\n  }\r\n}\r\n\r\n/**\r\n * Applies default options to the bottom sheet config.\r\n * @param defaults Object containing the default values to which to fall back.\r\n * @param config The configuration to which the defaults will be applied.\r\n * @returns The new configuration object with defaults applied.\r\n */\r\nfunction _applyConfigDefaults(\r\n  defaults: MatRightSheetConfig,\r\n  config?: MatRightSheetConfig,\r\n): MatRightSheetConfig {\r\n  return {...defaults, ...config};\r\n}\r\n","/**\r\n * @license\r\n * Copyright Google LLC All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an MIT-style license that can be\r\n * found in the LICENSE file at https://angular.io/license\r\n */\r\n\r\nexport * from './lib/right-sheet.module';\r\nexport * from './lib/right-sheet';\r\nexport * from './lib/right-sheet.config';\r\nexport * from './lib/right-sheet.container';\r\nexport * from './lib/right-sheet.animations';\r\nexport * from './lib/right-sheet.ref';\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["i3.MatRightSheetConfig","observableOf","i1","i2"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;;;;;;AAMG;AAIH;AACa,MAAA,uBAAuB,GAEhC;;AAEF,IAAA,eAAe,EAAE,OAAO,CAAC,OAAO,EAAE;QAChC,KAAK,CAAC,cAAc,EAAE,KAAK,CAAC,EAAC,SAAS,EAAE,kBAAkB,EAAC,CAAC,CAAC;QAC7D,KAAK,CAAC,SAAS,EAAE,KAAK,CAAC,EAAC,SAAS,EAAE,gBAAgB,EAAC,CAAC,CAAC;AACtD,QAAA,UAAU,CACR,oCAAoC,EACpC,OAAO,CACL,CAAG,EAAA,kBAAkB,CAAC,OAAO,IAC3B,eAAe,CAAC,kBAClB,CAAA,CAAE,CACH,CACF;AACD,QAAA,UAAU,CACR,iBAAiB,EACjB,OAAO,CACL,CAAG,EAAA,kBAAkB,CAAC,OAAO,IAC3B,eAAe,CAAC,kBAClB,CAAA,CAAE,CACH,CACF;KACF,CAAC;;;AClCJ;;;;;;AAMG;AASH;MACa,oBAAoB,GAAG,IAAI,cAAc,CAAM,mBAAmB,EAAE;AAEjF;;AAEG;MACU,mBAAmB,CAAA;AAAhC,IAAA,WAAA,GAAA;;QAWS,IAAI,CAAA,IAAA,GAAc,IAAI,CAAC;;QAGvB,IAAW,CAAA,WAAA,GAAa,IAAI,CAAC;;QAM7B,IAAY,CAAA,YAAA,GAAa,KAAK,CAAC;;QAG/B,IAAS,CAAA,SAAA,GAAmB,IAAI,CAAC;AAExC;;;;AAIG;QACI,IAAiB,CAAA,iBAAA,GAAa,IAAI,CAAC;;;;AAK1C;;;;AAIG;QACF,IAAS,CAAA,SAAA,GAAwC,QAAQ,CAAC;AAE3D;;;AAGG;QACI,IAAY,CAAA,YAAA,GAAa,IAAI,CAAC;KAStC;AAAA;;AC1CD;AAEA;;;AAGG;AA0BH;AACM,MAAO,sBAAuB,SAAQ,gBAAgB,CAAA;AAyB1D,IAAA,WAAA,CACmB,WAAoC,EACpC,kBAAqC,EACrC,iBAAmC,EACnC,qBAA2C,EAC3C,OAAe,EAChC,kBAAsC,EACR,QAAa;AAC3C;;AAEG;IACI,gBAAqC,EAAA;AAE5C,QAAA,KAAK,EAAE,CAAC;QAZS,IAAW,CAAA,WAAA,GAAX,WAAW,CAAyB;QACpC,IAAkB,CAAA,kBAAA,GAAlB,kBAAkB,CAAmB;QACrC,IAAiB,CAAA,iBAAA,GAAjB,iBAAiB,CAAkB;QACnC,IAAqB,CAAA,qBAAA,GAArB,qBAAqB,CAAsB;QAC3C,IAAO,CAAA,OAAA,GAAP,OAAO,CAAQ;QAMzB,IAAgB,CAAA,gBAAA,GAAhB,gBAAgB,CAAqB;;AAjCvC,QAAA,IAAA,CAAA,sBAAsB,GAAG,IAAI,YAAY,EAAkB,CAAC;;QAG5D,IAAe,CAAA,eAAA,GAAkC,MAAM,CAAC;;QAWvD,IAA2B,CAAA,2BAAA,GAAuB,IAAI,CAAC;AAuB7D,QAAA,IAAI,CAAC,SAAS,GAAG,QAAoB,CAAC;QACtC,IAAI,CAAC,uBAAuB,GAAG,kBAAkB;AAC9C,aAAA,OAAO,CAAC;AACP,YAAA,WAAW,CAAC,MAAM;AAClB,YAAA,WAAW,CAAC,KAAK;AACjB,YAAA,WAAW,CAAC,MAAM;SACnB,CAAC;aACD,SAAS,CAAC,MAAK;AACd,YAAA,IAAI,CAAC,YAAY,CACf,kCAAkC,EAClC,kBAAkB,CAAC,SAAS,CAAC,WAAW,CAAC,MAAM,CAAC,CACjD,CAAC;AACF,YAAA,IAAI,CAAC,YAAY,CACf,iCAAiC,EACjC,kBAAkB,CAAC,SAAS,CAAC,WAAW,CAAC,KAAK,CAAC,CAChD,CAAC;AACF,YAAA,IAAI,CAAC,YAAY,CACf,kCAAkC,EAClC,kBAAkB,CAAC,SAAS,CAAC,WAAW,CAAC,MAAM,CAAC,CACjD,CAAC;AACJ,SAAC,CAAC,CAAC;KACN;;AAGM,IAAA,qBAAqB,CAC1B,MAA0B,EAAA;QAE1B,IAAI,CAAC,uBAAuB,EAAE,CAAC;QAC/B,IAAI,CAAC,cAAc,EAAE,CAAC;QACtB,IAAI,CAAC,6BAA6B,EAAE,CAAC;QACrC,OAAO,IAAI,CAAC,aAAa,CAAC,qBAAqB,CAAC,MAAM,CAAC,CAAC;KACzD;;AAGM,IAAA,oBAAoB,CACzB,MAAyB,EAAA;QAEzB,IAAI,CAAC,uBAAuB,EAAE,CAAC;QAC/B,IAAI,CAAC,cAAc,EAAE,CAAC;QACtB,IAAI,CAAC,6BAA6B,EAAE,CAAC;QACrC,OAAO,IAAI,CAAC,aAAa,CAAC,oBAAoB,CAAC,MAAM,CAAC,CAAC;KACxD;;IAGM,KAAK,GAAA;AACV,QAAA,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;AACpB,YAAA,IAAI,CAAC,eAAe,GAAG,SAAS,CAAC;AACjC,YAAA,IAAI,CAAC,kBAAkB,CAAC,aAAa,EAAE,CAAC;AACzC,SAAA;KACF;;IAGM,IAAI,GAAA;AACT,QAAA,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;AACpB,YAAA,IAAI,CAAC,eAAe,GAAG,QAAQ,CAAC;AAChC,YAAA,IAAI,CAAC,kBAAkB,CAAC,YAAY,EAAE,CAAC;AACxC,SAAA;KACF;IAEM,WAAW,GAAA;AAChB,QAAA,IAAI,CAAC,uBAAuB,CAAC,WAAW,EAAE,CAAC;AAC3C,QAAA,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;KACxB;AAEM,IAAA,gBAAgB,CAAC,KAAqB,EAAA;AAC3C,QAAA,IAAI,KAAK,CAAC,OAAO,KAAK,QAAQ,EAAE;YAC9B,IAAI,CAAC,aAAa,EAAE,CAAC;AACtB,SAAA;AAAM,aAAA,IAAI,KAAK,CAAC,OAAO,KAAK,SAAS,EAAE;YACtC,IAAI,CAAC,UAAU,EAAE,CAAC;AACnB,SAAA;AAED,QAAA,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;KACzC;AAEM,IAAA,iBAAiB,CAAC,KAAqB,EAAA;AAC5C,QAAA,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;KACzC;IAEO,YAAY,CAAC,QAAgB,EAAE,GAAY,EAAA;AACjD,QAAA,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC;KAChE;IAEO,uBAAuB,GAAA;AAC7B,QAAA,IAAI,IAAI,CAAC,aAAa,CAAC,WAAW,EAAE,EAAE;AACpC,YAAA,MAAM,KAAK,CACT,6EAA6E,CAC9E,CAAC;AACH,SAAA;KACF;IAEO,cAAc,GAAA;AACpB,QAAA,MAAM,OAAO,GAAgB,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC;AAC5D,QAAA,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,GAAG,WAAW,CAAC,IAAI,CAAC,gBAAgB,CAAC,UAAU,IAAI,EAAE,CAAC,CAAC,CAAC;KAC/E;AAEH;;;;AAIK;IACI,WAAW,CAAC,OAAoB,EAAE,OAAsB,EAAA;QAC/D,IAAI,CAAC,IAAI,CAAC,qBAAqB,CAAC,WAAW,CAAC,OAAO,CAAC,EAAE;AACpD,YAAA,OAAO,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC;;AAEtB,YAAA,IAAI,CAAC,OAAO,CAAC,iBAAiB,CAAC,MAAK;AAClC,gBAAA,OAAO,CAAC,gBAAgB,CAAC,MAAM,EAAE,MAAM,OAAO,CAAC,eAAe,CAAC,UAAU,CAAC,CAAC,CAAC;AAC5E,gBAAA,OAAO,CAAC,gBAAgB,CAAC,WAAW,EAAE,MAAM,OAAO,CAAC,eAAe,CAAC,UAAU,CAAC,CAAC,CAAC;AACnF,aAAC,CAAC,CAAC;AACJ,SAAA;AACD,QAAA,OAAO,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;KACxB;AAEC;;;AAGG;IACM,mBAAmB,CAAC,QAAgB,EAAE,OAAsB,EAAA;AACnE,QAAA,IAAI,cAAc,GAAG,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,aAAa,CAC/D,QAAQ,CACa,CAAC;AACxB,QAAA,IAAI,cAAc,EAAE;AAClB,YAAA,IAAI,CAAC,WAAW,CAAC,cAAc,EAAE,OAAO,CAAC,CAAC;AAC3C,SAAA;KACF;AAED;;;AAGG;IACM,UAAU,GAAA;AACjB,QAAA,MAAM,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC;AAE/C,QAAA,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;YACpB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;AAC1D,SAAA;;;;;;AAOD,QAAA,QAAQ,IAAI,CAAC,gBAAgB,CAAC,SAAS;AACrC,YAAA,KAAK,KAAK,CAAC;AACX,YAAA,KAAK,QAAQ;AACX,gBAAA,MAAM,aAAa,GAAG,iCAAiC,EAAE,CAAC;;;;;;gBAM1D,IAAI,aAAa,KAAK,OAAO,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,aAAa,CAAC,EAAE;oBACjE,OAAO,CAAC,KAAK,EAAE,CAAC;AACjB,iBAAA;gBACD,MAAM;AACR,YAAA,KAAK,IAAI,CAAC;AACV,YAAA,KAAK,gBAAgB;AACnB,gBAAA,IAAI,CAAC,UAAU,CAAC,4BAA4B,EAAE,CAAC;gBAC/C,MAAM;AACR,YAAA,KAAK,eAAe;AAClB,gBAAA,IAAI,CAAC,mBAAmB,CAAC,0CAA0C,CAAC,CAAC;gBACrE,MAAM;AACR,YAAA;gBACE,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,gBAAgB,CAAC,SAAU,CAAC,CAAC;gBAC3D,MAAM;AACT,SAAA;KACF;;IAGO,aAAa,GAAA;AACnB,QAAA,MAAM,OAAO,GAAG,IAAI,CAAC,2BAA2B,CAAC;;AAGjD,QAAA,IACE,IAAI,CAAC,gBAAgB,CAAC,YAAY;YAClC,OAAO;AACP,YAAA,OAAO,OAAO,CAAC,KAAK,KAAK,UAAU,EACnC;AACA,YAAA,MAAM,aAAa,GAAG,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC;AACnD,YAAA,MAAM,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC;;;;;AAM/C,YAAA,IAAI,CAAC,aAAa,IAAI,aAAa,KAAK,IAAI,CAAC,SAAS,CAAC,IAAI,IAAI,aAAa,KAAK,OAAO;AACtF,gBAAA,OAAO,CAAC,QAAQ,CAAC,aAAa,CAAC,EAAE;gBACjC,OAAO,CAAC,KAAK,EAAE,CAAC;AACjB,aAAA;AACF,SAAA;QAED,IAAI,IAAI,CAAC,UAAU,EAAE;AACnB,YAAA,IAAI,CAAC,UAAU,CAAC,OAAO,EAAE,CAAC;AAC3B,SAAA;KACF;;IAGO,6BAA6B,GAAA;AACnC,QAAA,IAAI,CAAC,2BAA2B,GAAG,IAAI,CAAC,SAAS;AAC9C,aAAA,aAA4B,CAAC;;AAGhC,QAAA,IAAI,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,KAAK,EAAE;AACxC,YAAA,IAAI,CAAC,OAAO,CAAC,iBAAiB,CAAC,MAAK;AAClC,gBAAA,OAAO,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC,MAAM,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,KAAK,EAAE,CAAC,CAAC;AACvE,aAAC,CAAC,CAAC;AACJ,SAAA;KACF;;AAtPU,sBAAA,CAAA,IAAA,GAAA,EAAA,CAAA,kBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,QAAA,EAAA,QAAA,EAAA,EAAA,EAAA,IAAA,EAAA,sBAAsB,yMAgCX,QAAQ,EAAA,QAAA,EAAA,IAAA,EAAA,EAAA,EAAA,KAAA,EAAAA,mBAAA,EAAA,CAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,SAAA,EAAA,CAAA,CAAA;uGAhCnB,sBAAsB,EAAA,QAAA,EAAA,2BAAA,EAAA,IAAA,EAAA,EAAA,UAAA,EAAA,EAAA,UAAA,EAAA,IAAA,EAAA,MAAA,EAAA,QAAA,EAAA,YAAA,EAAA,MAAA,EAAA,EAAA,SAAA,EAAA,EAAA,cAAA,EAAA,2BAAA,EAAA,aAAA,EAAA,0BAAA,EAAA,EAAA,UAAA,EAAA,EAAA,iBAAA,EAAA,6BAAA,EAAA,QAAA,EAAA,iBAAA,EAAA,EAAA,cAAA,EAAA,2BAAA,EAAA,EAAA,WAAA,EAAA,CAAA,EAAA,YAAA,EAAA,eAAA,EAAA,KAAA,EAAA,IAAA,EAAA,SAAA,EAUtB,eAAe,EC5E5B,WAAA,EAAA,IAAA,EAAA,MAAA,EAAA,IAAA,EAAA,CAAA,EAAA,eAAA,EAAA,IAAA,EAAA,QAAA,EAAA,EAAA,EAAA,QAAA,EAAA,iDACA,oeDmDc,CAAC,uBAAuB,CAAC,eAAe,CAAC,EAAA,eAAA,EAAA,EAAA,CAAA,uBAAA,CAAA,OAAA,EAAA,aAAA,EAAA,EAAA,CAAA,iBAAA,CAAA,IAAA,EAAA,CAAA,CAAA;2FAc1C,sBAAsB,EAAA,UAAA,EAAA,CAAA;kBA1BlC,SAAS;AAEE,YAAA,IAAA,EAAA,CAAA,EAAA,QAAA,EAAA,2BAA2B,EAOpB,eAAA,EAAA,uBAAuB,CAAC,OAAO,iBAEjC,iBAAiB,CAAC,IAAI,EAAA,UAAA,EACzB,CAAC,uBAAuB,CAAC,eAAe,CAAC,EAE/C,IAAA,EAAA;AACJ,wBAAA,KAAK,EAAE,2BAA2B;AAClC,wBAAA,QAAQ,EAAE,IAAI;AACd,wBAAA,IAAI,EAAE,QAAQ;AACd,wBAAA,YAAY,EAAE,MAAM;AACpB,wBAAA,mBAAmB,EAAE,6BAA6B;AAClD,wBAAA,UAAU,EAAE,iBAAiB;AAC7B,wBAAA,gBAAgB,EAAE,2BAA2B;AAC7C,wBAAA,eAAe,EAAE,0BAA0B;AAC5C,qBAAA,EAAA,QAAA,EAAA,iDAAA,EAAA,MAAA,EAAA,CAAA,uRAAA,CAAA,EAAA,CAAA;;0BAmCE,QAAQ;;0BAAI,MAAM;2BAAC,QAAQ,CAAA;2EArBb,aAAa,EAAA,CAAA;sBAD7B,SAAS;AAAC,gBAAA,IAAA,EAAA,CAAA,eAAe,EAAE,EAAC,MAAM,EAAE,IAAI,EAAC,CAAA;;;AE5E5C;;;;;;AAMG;MAcU,mBAAmB,CAAA;;gHAAnB,mBAAmB,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,QAAA,EAAA,CAAA,CAAA;AAAnB,mBAAA,CAAA,IAAA,GAAA,EAAA,CAAA,mBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,QAAA,EAAA,QAAA,EAAA,EAAA,EAAA,IAAA,EAAA,mBAAmB,EAFb,YAAA,EAAA,CAAA,sBAAsB,CAF3B,EAAA,OAAA,EAAA,CAAA,YAAY,EAAE,aAAa,EAAE,eAAe,EAAE,YAAY,CAC1D,EAAA,OAAA,EAAA,CAAA,sBAAsB,EAAE,eAAe,CAAA,EAAA,CAAA,CAAA;iHAGxC,mBAAmB,EAAA,OAAA,EAAA,CAJlB,YAAY,EAAE,aAAa,EAAE,eAAe,EAAE,YAAY,EAClC,eAAe,CAAA,EAAA,CAAA,CAAA;2FAGxC,mBAAmB,EAAA,UAAA,EAAA,CAAA;kBAL/B,QAAQ;AAAC,YAAA,IAAA,EAAA,CAAA;oBACN,OAAO,EAAE,CAAC,YAAY,EAAE,aAAa,EAAE,eAAe,EAAE,YAAY,CAAC;AACrE,oBAAA,OAAO,EAAE,CAAC,sBAAsB,EAAE,eAAe,CAAC;oBAClD,YAAY,EAAE,CAAC,sBAAsB,CAAC;AACzC,iBAAA,CAAA;;;ACnBD;;;;;;AAMG;AASH;;AAEG;MACU,gBAAgB,CAAA;IAsB3B,WACE,CAAA,iBAAyC,EACxB,WAAuB;;IAExC,SAAoB,EAAA;QAFH,IAAW,CAAA,WAAA,GAAX,WAAW,CAAY;;AAVzB,QAAA,IAAA,CAAA,eAAe,GAAG,IAAI,OAAO,EAAiB,CAAC;;AAG/C,QAAA,IAAA,CAAA,YAAY,GAAG,IAAI,OAAO,EAAQ,CAAC;AAWlD,QAAA,IAAI,CAAC,iBAAiB,GAAG,iBAAiB,CAAC;QAC3C,IAAI,CAAC,YAAY,GAAG,iBAAiB,CAAC,gBAAgB,CAAC,YAAY,CAAC;;AAGpE,QAAA,iBAAiB,CAAC,sBAAsB;AACrC,aAAA,IAAI,CACH,MAAM,CACJ,CAAC,KAAK,KACJ,KAAK,CAAC,SAAS,KAAK,MAAM;YAC1B,KAAK,CAAC,OAAO,KAAK,SAAS,CAC9B,EACD,IAAI,CAAC,CAAC,CAAC,CACR;aACA,SAAS,CAAC,MAAK;AACd,YAAA,IAAI,CAAC,YAAY,CAAC,IAAI,EAAE,CAAC;AACzB,YAAA,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,CAAC;AAC/B,SAAC,CAAC,CAAC;;AAGL,QAAA,iBAAiB,CAAC,sBAAsB;AACrC,aAAA,IAAI,CACH,MAAM,CACJ,CAAC,KAAK,KACJ,KAAK,CAAC,SAAS,KAAK,MAAM;YAC1B,KAAK,CAAC,OAAO,KAAK,QAAQ,CAC7B,EACD,IAAI,CAAC,CAAC,CAAC,CACR;aACA,SAAS,CAAC,MAAK;AACd,YAAA,IAAI,CAAC,WAAW,CAAC,OAAO,EAAE,CAAC;YAC3B,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;AACxC,YAAA,IAAI,CAAC,eAAe,CAAC,QAAQ,EAAE,CAAC;AAClC,SAAC,CAAC,CAAC;AAEL,QAAA,KAAK,CACH,WAAW,CAAC,aAAa,EAAE,EAC3B,WAAW;AACR,aAAA,aAAa,EAAE;aACf,IAAI,CAAC,MAAM,CAAC,CAAC,KAAK,KAAK,KAAK,CAAC,OAAO,KAAK,MAAM,CAAC,CAAC,CACrD,CAAC,SAAS,CAAC,MAAK;YACf,IAAI,CAAC,IAAI,CAAC,YAAY;AACpB,iBAAC,KAAK,CAAC,IAAI,KAAK,SAAS,IAAI,CAAC,cAAc,CAAC,KAAsB,CAAC,CAAC,EAAE;gBACvE,KAAK,CAAC,cAAc,EAAE,CAAC;gBACvB,IAAI,CAAC,OAAO,EAAE,CAAC;AAChB,aAAA;AACH,SAAC,CAAC,CAAC;KACJ;AAED;;;AAGG;AACI,IAAA,OAAO,CAAC,MAAU,EAAA;AACvB,QAAA,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,MAAM,EAAE;;YAEhC,IAAI,CAAC,iBAAiB,CAAC,sBAAsB;AAC1C,iBAAA,IAAI,CACH,MAAM,CAAC,CAAC,KAAK,KAAK,KAAK,CAAC,SAAS,KAAK,OAAO,CAAC,EAC9C,IAAI,CAAC,CAAC,CAAC,CACR;iBACA,SAAS,CAAC,MAAM,IAAI,CAAC,WAAW,CAAC,cAAc,EAAE,CAAC,CAAC;AAEtD,YAAA,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;AACtB,YAAA,IAAI,CAAC,iBAAiB,CAAC,IAAI,EAAE,CAAC;AAC/B,SAAA;KACF;;IAGM,cAAc,GAAA;AACnB,QAAA,OAAO,IAAI,CAAC,eAAe,CAAC,YAAY,EAAE,CAAC;KAC5C;;IAGM,WAAW,GAAA;AAChB,QAAA,OAAO,IAAI,CAAC,YAAY,CAAC,YAAY,EAAE,CAAC;KACzC;AAED;;AAEG;IACI,aAAa,GAAA;AAClB,QAAA,OAAO,IAAI,CAAC,WAAW,CAAC,aAAa,EAAE,CAAC;KACzC;AAED;;AAEG;IACI,aAAa,GAAA;AAClB,QAAA,OAAO,IAAI,CAAC,WAAW,CAAC,aAAa,EAAE,CAAC;KACzC;AAEM,IAAA,WAAW,CAAC,KAAa,EAAA;QAC9B,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,EAAC,KAAK,EAAC,CAAC,CAAC;KACtC;AACF;;AC5ID;;;;;;AAMG;AAaH;MACa,+BAA+B,GAAG,IAAI,cAAc,CAAsB,iCAAiC,EAAE;AAE1H;;AAEG;MAEU,aAAa,CAAA;IAmBxB,WACmB,CAAA,QAAiB,EACjB,SAAmB,EAGnB,iBAAgC,EACpB,SAAoB,EAGhC,eAAqC,EAAA;QARrC,IAAQ,CAAA,QAAA,GAAR,QAAQ,CAAS;QACjB,IAAS,CAAA,SAAA,GAAT,SAAS,CAAU;QAGnB,IAAiB,CAAA,iBAAA,GAAjB,iBAAiB,CAAe;QACpB,IAAS,CAAA,SAAA,GAAT,SAAS,CAAW;QAGhC,IAAe,CAAA,eAAA,GAAf,eAAe,CAAsB;QA3BhD,IAAyB,CAAA,yBAAA,GAAiC,IAAI,CAAC;KA6BtE;;AA1BD,IAAA,IAAI,oBAAoB,GAAA;AACtB,QAAA,MAAM,MAAM,GAAG,IAAI,CAAC,iBAAiB,CAAC;AACtC,QAAA,OAAO,MAAM;cACT,MAAM,CAAC,oBAAoB;AAC7B,cAAE,IAAI,CAAC,yBAAyB,CAAC;KACpC;IAED,IAAI,oBAAoB,CAAC,KAAmC,EAAA;QAC1D,IAAI,IAAI,CAAC,iBAAiB,EAAE;AAC1B,YAAA,IAAI,CAAC,iBAAiB,CAAC,oBAAoB,GAAG,KAAK,CAAC;AACrD,SAAA;AAAM,aAAA;AACL,YAAA,IAAI,CAAC,yBAAyB,GAAG,KAAK,CAAC;AACxC,SAAA;KACF;IAuBM,IAAI,CACT,sBAAyD,EACzD,MAA+B,EAAA;AAE/B,QAAA,MAAM,OAAO,GAAG,oBAAoB,CAClC,IAAI,CAAC,eAAe,IAAI,IAAI,mBAAmB,EAAE,EACjD,MAAM,CACP,CAAC;QACF,MAAM,UAAU,GAAG,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;QAChD,MAAM,SAAS,GAAG,IAAI,CAAC,gBAAgB,CAAC,UAAU,EAAE,OAAO,CAAC,CAAC;AAC7D,QAAA,MAAM,GAAG,GAAG,IAAI,gBAAgB,CAC9B,SAAS,EACT,UAAU,EACV,IAAI,CAAC,SAAS,CACf,CAAC;QAEF,IAAI,sBAAsB,YAAY,WAAW,EAAE;YACjD,SAAS,CAAC,oBAAoB,CAC5B,IAAI,cAAc,CAAI,sBAAsB,EAAE,IAAK,EAAE;gBACnD,SAAS,EAAE,OAAO,CAAC,IAAI;AACvB,gBAAA,aAAa,EAAE,GAAG;AACZ,aAAA,CAAC,CACV,CAAC;AACH,SAAA;AAAM,aAAA;AACL,YAAA,MAAM,MAAM,GAAG,IAAI,eAAe,CAChC,sBAAsB,EACtB,SAAS,EACT,IAAI,CAAC,eAAe,CAAC,OAAO,EAAE,GAAG,CAAC,CACnC,CAAC;YACF,MAAM,UAAU,GAAG,SAAS,CAAC,qBAAqB,CAAC,MAAM,CAAC,CAAC;AAC3D,YAAA,GAAG,CAAC,QAAQ,GAAG,UAAU,CAAC,QAAQ,CAAC;AACpC,SAAA;;AAGD,QAAA,GAAG,CAAC,cAAc,EAAE,CAAC,SAAS,CAAC,MAAK;;AAElC,YAAA,IAAI,IAAI,CAAC,oBAAoB,IAAI,GAAG,EAAE;AACpC,gBAAA,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC;AAClC,aAAA;AACH,SAAC,CAAC,CAAC;QAEH,IAAI,IAAI,CAAC,oBAAoB,EAAE;;;AAG7B,YAAA,IAAI,CAAC,oBAAoB;AACtB,iBAAA,cAAc,EAAE;iBAChB,SAAS,CAAC,MAAM,GAAG,CAAC,iBAAiB,CAAC,KAAK,EAAE,CAAC,CAAC;AAClD,YAAA,IAAI,CAAC,oBAAoB,CAAC,OAAO,EAAE,CAAC;AACrC,SAAA;AAAM,aAAA;;AAEL,YAAA,GAAG,CAAC,iBAAiB,CAAC,KAAK,EAAE,CAAC;AAC/B,SAAA;AAED,QAAA,IAAI,CAAC,oBAAoB,GAAG,GAAG,CAAC;AAEhC,QAAA,OAAO,GAAG,CAAC;KACZ;AAED;;AAEG;IACI,OAAO,GAAA;QACZ,IAAI,IAAI,CAAC,oBAAoB,EAAE;AAC7B,YAAA,IAAI,CAAC,oBAAoB,CAAC,OAAO,EAAE,CAAC;AACrC,SAAA;KACF;IAEM,WAAW,GAAA;QAChB,IAAI,IAAI,CAAC,yBAAyB,EAAE;AAClC,YAAA,IAAI,CAAC,yBAAyB,CAAC,OAAO,EAAE,CAAC;AAC1C,SAAA;KACF;AAED;;AAEG;IACK,gBAAgB,CACtB,UAAsB,EACtB,MAA2B,EAAA;QAE3B,MAAM,YAAY,GAChB,MAAM;AACN,YAAA,MAAM,CAAC,gBAAgB;AACvB,YAAA,MAAM,CAAC,gBAAgB,CAAC,QAAQ,CAAC;QACnC,MAAM,QAAQ,GAAG,IAAI,cAAc,CACjC,YAAY,IAAI,IAAI,CAAC,SAAS,EAC9B,IAAI,OAAO,CAAC,CAAC,CAAC,mBAAmB,EAAE,MAAM,CAAC,CAAC,CAAC,CAC7C,CAAC;AAEF,QAAA,MAAM,eAAe,GAAG,IAAI,eAAe,CACzC,sBAAsB,EACtB,MAAM,CAAC,gBAAgB,EACvB,QAAQ,CACT,CAAC;QACF,MAAM,YAAY,GAAyC,UAAU,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC;QAC9F,OAAO,YAAY,CAAC,QAAQ,CAAC;KAC9B;AAED;;;AAGG;AACK,IAAA,cAAc,CAAC,MAA2B,EAAA;AAChD,QAAA,MAAM,aAAa,GAAG,IAAI,aAAa,CAAC;YACtC,SAAS,EAAE,MAAM,CAAC,SAAS;YAC3B,WAAW,EAAE,MAAM,CAAC,WAAW;YAC/B,mBAAmB,EAAE,MAAM,CAAC,iBAAiB;AAC7C,YAAA,KAAK,EAAE,MAAM,CAAC,KAAK,IAAI,OAAO;AAC9B,YAAA,MAAM,EAAE,OAAO;AACf,YAAA,cAAc,EAAE,MAAM,CAAC,cAAc,IAAI,IAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC,KAAK,EAAE;YAC/E,gBAAgB,EAAE,IAAI,CAAC,QAAQ;AAC5B,iBAAA,QAAQ,EAAE;AACV,iBAAA,MAAM,EAAE;iBACR,GAAG,CAAC,KAAK,CAAC;iBACV,KAAK,CAAC,KAAK,CAAC;iBACZ,MAAM,CAAC,KAAK,CAAC;AACjB,SAAA,CAAC,CAAC;QAEH,IAAI,MAAM,CAAC,aAAa,EAAE;AACxB,YAAA,aAAa,CAAC,aAAa,GAAG,MAAM,CAAC,aAAa,CAAC;AACpD,SAAA;QAED,OAAO,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC;KAC5C;AAED;;;;AAIG;IACK,eAAe,CACrB,MAA2B,EAC3B,aAAkC,EAAA;QAElC,MAAM,YAAY,GAChB,MAAM;AACN,YAAA,MAAM,CAAC,gBAAgB;AACvB,YAAA,MAAM,CAAC,gBAAgB,CAAC,QAAQ,CAAC;AACnC,QAAA,MAAM,eAAe,GAAG,IAAI,OAAO,CAAW;YAC5C,CAAC,gBAAgB,EAAE,aAAa,CAAC;AACjC,YAAA,CAAC,oBAAoB,EAAE,MAAM,CAAC,IAAI,CAAC;AACpC,SAAA,CAAC,CAAC;QAEH,IACE,MAAM,CAAC,SAAS;AAChB,aAAC,CAAC,YAAY;gBACZ,CAAC,YAAY,CAAC,GAAG,CAAwB,cAAc,EAAE,IAAI,CAAC,CAAC,EACjE;AACA,YAAA,eAAe,CAAC,GAAG,CAAC,cAAc,EAAE;gBAClC,KAAK,EAAE,MAAM,CAAC,SAAS;gBACvB,MAAM,EAAEC,EAAY,EAAE;AACvB,aAAA,CAAC,CAAC;AACJ,SAAA;QAED,OAAO,IAAI,cAAc,CACvB,YAAY,IAAI,IAAI,CAAC,SAAS,EAC9B,eAAe,CAChB,CAAC;KACH;;0GAtMU,aAAa,EAAA,IAAA,EAAA,CAAA,EAAA,KAAA,EAAAC,IAAA,CAAA,OAAA,EAAA,EAAA,EAAA,KAAA,EAAA,EAAA,CAAA,QAAA,EAAA,EAAA,EAAA,KAAA,EAwBc,aAAa,EAAA,QAAA,EAAA,IAAA,EAAA,QAAA,EAAA,IAAA,EAAA,EAAA,EAAA,KAAA,EAAAC,IAAA,CAAA,QAAA,EAAA,QAAA,EAAA,IAAA,EAAA,EAAA,EAAA,KAAA,EAGzC,+BAA+B,EAAA,QAAA,EAAA,IAAA,EAAA,CAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,UAAA,EAAA,CAAA,CAAA;AA3B9B,aAAA,CAAA,KAAA,GAAA,EAAA,CAAA,qBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,QAAA,EAAA,QAAA,EAAA,EAAA,EAAA,IAAA,EAAA,aAAa,cADD,mBAAmB,EAAA,CAAA,CAAA;2FAC/B,aAAa,EAAA,UAAA,EAAA,CAAA;kBADzB,UAAU;mBAAC,EAAC,UAAU,EAAE,mBAAmB,EAAC,CAAA;yGAyBL,aAAa,EAAA,UAAA,EAAA,CAAA;0BAFhD,QAAQ;;0BACR,QAAQ;;0BAER,QAAQ;;0BACR,QAAQ;;0BACR,MAAM;2BAAC,+BAA+B,CAAA;;AA8K3C;;;;;AAKG;AACH,SAAS,oBAAoB,CAC3B,QAA6B,EAC7B,MAA4B,EAAA;AAE5B,IAAA,OAAO,EAAC,GAAG,QAAQ,EAAE,GAAG,MAAM,EAAC,CAAC;AAClC;;AC9OA;;;;;;AAMG;;ACNH;;AAEG;;;;"}